<div *ngIf="this.flag">

  <div class="content-heading mb-lg">
    新增会员
  </div>

  <div class="panel panel-default">

    <div class="panel mb p ts w98 m-auto thc">
      <p class="font18">操作提示</p>
      <ul>
        <li>统计图展示了时间段内新增会员数的走势和与前一时间段的对比</li>
        <li>统计表展示了时间段内新增会员数值和与前一时间段的同比数值，点击每条记录后的“查看”，了解新增会员的详细信息</li>
      </ul>
    </div>

    <div class="w98 m-auto h50">
      <span class="btn statistic-btn btn-default m0" (click)="selectInfos()">
        <i class="icon icon-magnifier"></i>
      </span>
      <div class="pull-right">
        <div class="col-xs-3 form-group" style="width: 400px">

          <div *ngIf="showType.MONTH">
            <select [(ngModel)]="select.year" class="pull-left w43 form-control" style="display: inline-block;margin-right: 20px">
              <option *ngFor="let info of yearInfo" value="{{info}}">{{info}}</option>
            </select>
            <select [(ngModel)]="select.month" class="w43 form-control">
              <option *ngFor="let info of month" value="{{info}}">{{info}}</option>
            </select>
          </div>

          <div *ngIf="showType.WEEK" >
            <select [(ngModel)]="select.year" class="form-control w21 pull-left mr5">
              <option *ngFor="let info of yearInfo" value="{{info}}">{{info}}</option>
            </select>
            <select [(ngModel)]="select.month" (change)="getWeekListByMonth()" class="form-control w21 pull-left mr5">
              <option *ngFor="let info of month" value="{{info}}">{{info}}</option>
            </select>
            <select [(ngModel)]="select.week" class="form-control w55">
              <option *ngFor="let info of weekForMonth" value="{{info}}">{{info}}</option>
            </select>
          </div>

          <div *ngIf="showType.DAY" style="margin-right: 60px">
            <input type="text" class="form-control" bsDatepicker [(ngModel)]="datepickerModel"  (change)="test()"
                   [bsConfig]="bsConfig" #dpr="bsDatepicker"/>
            <span class="statistic-btn input-group-addon fa fa-calendar spanbtn h35"  (click)="dpr.show()"></span>
          </div>
        </div>
      </div>
      <select class="sel form-control pull-right"  name="queryType"
              [(ngModel)]="queryType" (change)="search()">
        <option *ngFor="let item of queryTypes" [value]="item.key">{{item.val}}</option>
      </select>
    </div>

  </div>
  <!--图表切换-->
  <div class="panel m-auto">
    <div echarts [options]="optionPrev" class="demo-chart w100"></div>
  </div>
  <div class="panel panel-default mt20">
  <div class="table-title w100 h50 font18 ">新增会员统计表</div>
  <div class="panel-body">
    <table class="table table-striped">
      <thead>
      <tr class="">
        <th class="w20 text-center">
          <span *ngIf="showType.DAY">小时</span>
          <span *ngIf="showType.WEEK">星期</span>
          <span *ngIf="showType.MONTH">日期</span>
        </th>
        <th class="w20 text-center">
          <span *ngIf="showType.DAY">昨天</span>
          <span *ngIf="showType.WEEK">上周</span>
          <span *ngIf="showType.MONTH">上月</span>
        </th>
        <th class="w20 text-center">
          <span *ngIf="showType.DAY">今天</span>
          <span *ngIf="showType.WEEK">本周</span>
          <span *ngIf="showType.MONTH">本月</span>
        </th>
        <th class="w20 text-center">
          <span>同比</span>
        </th>
        <th class="20 text-center">
          <span>管理操作</span>
        </th>
      </tr>
      </thead>
      <tbody>
      <tr class="text-center" *ngFor="let item of prevData.yaxis;let i = index;">
        <td class="">{{prevData.keys[i]}}</td>
        <td class="">{{item}}</td>
        <td class="">{{nowData.yaxis[i]}}</td>
        <td class="">{{nowData.yaxis[i]}}</td>
        <td class="">
          <span routerLink="../list-detail" [queryParams]="{linkType:'',nowtime:now,prevtime:prev}" class=" btn btn-primary"><i
            class="icon icon-eye">查看</i></span>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>

<router-outlet></router-outlet>
